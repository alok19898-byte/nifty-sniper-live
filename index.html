<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sniper Master Protocol - Absolute</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #010409; color: #e6edf3; font-family: 'Segoe UI', sans-serif; }
        .max-vol { background: #7c3aed !important; box-shadow: 0 0 15px #7c3aed; color: white !important; font-weight: bold; border-radius: 4px; }
        .max-oi { background: #2563eb !important; box-shadow: 0 0 15px #2563eb; color: white !important; font-weight: bold; border-radius: 4px; }
        .strike-col { background: #161b22; color: #58a6ff; font-weight: 900; border-left: 2px solid #30363d; border-right: 2px solid #30363d; }
        .red-line { border-bottom: 6px solid #ff0000 !important; box-shadow: 0 4px 15px rgba(255,0,0,0.6); }
        .soc-alert { background: #7f1d1d !important; animation: blink 0.5s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
    </style>
</head>
<body>

    <div id="app-container">
        <div class="p-4 bg-[#0d1117] border-b border-[#30363d] sticky top-0 z-50 shadow-2xl">
            <div class="flex justify-between items-center mb-3">
                <h1 class="text-xl font-black text-[#58a6ff] italic uppercase">Sniper Master Terminal ðŸŽ¯</h1>
                <div id="risk-status" class="px-4 py-1 rounded border font-black text-[10px] uppercase">READY</div>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-center">
                <div id="soc-box" class="bg-[#161b22] p-2 rounded border border-[#30363d]">
                    <p class="text-[8px] text-gray-500 font-bold uppercase">3H SOC TIMER</p>
                    <p id="timer-val" class="text-xs font-black">00:00:00</p>
                </div>
                <div class="bg-[#161b22] p-2 rounded border border-[#30363d]">
                    <p class="text-[8px] text-gray-500 font-bold uppercase">5% STUCK RULE</p>
                    <p id="stuck-status" class="text-xs font-black">---</p>
                </div>
                <div class="bg-[#161b22] p-2 rounded border border-[#30363d]">
                    <p class="text-[8px] text-gray-500 font-bold uppercase">LTP REF (312/262)</p>
                    <p id="ltp-ref" class="text-xs font-black text-yellow-500">CALCULATING...</p>
                </div>
                <div class="bg-[#161b22] p-2 rounded border border-[#30363d]">
                    <p class="text-[8px] text-gray-500 font-bold uppercase">STRENGTH %</p>
                    <p id="strength-val" class="text-xs font-black text-blue-400">0%</p>
                </div>
            </div>
        </div>

        <div class="p-2 mb-48 overflow-x-auto">
            <table class="w-full text-center border-collapse">
                <thead class="bg-[#0d1117] text-gray-500 text-[10px] uppercase">
                    <tr>
                        <th class="p-3">IV</th><th class="p-3">OI CHG</th><th class="p-3">OI</th><th class="p-3">VOL</th>
                        <th class="p-3 text-green-400">LTP(C)</th><th class="p-3 text-blue-400">STRIKE</th>
                        <th class="p-3 text-red-400">LTP(P)</th><th class="p-3">VOL</th><th class="p-3">OI</th><th class="p-3">OI CHG</th><th class="p-3">IV</th>
                    </tr>
                </thead>
                <tbody id="chain-rows" class="font-mono text-[13px] text-white"></tbody>
            </table>
        </div>

        <div class="fixed bottom-0 w-full p-4 bg-[#0d1117] border-t-2 border-[#30363d] shadow-2xl z-50">
            <div id="protocol-advisory" class="p-3 bg-blue-900/20 border border-blue-500/50 rounded text-[11px] font-black italic uppercase text-center text-blue-100">
                INITIALIZING MASTER PROTOCOL...
            </div>
        </div>
    </div>

    <script>
        // CORE PROTOCOL LOGIC
        let secondsPassed = 0;
        const STRIKES = [25100, 25150, 25200, 25250, 25300, 25350, 25400];
        const SPOT = 25262.00; // Aligned with Deep Value

        function runSniper() {
            // 1. Calculate LTP Distance from 312 and 262 [cite: 2026-02-14]
            const currentLTP = 285.40; // Example live LTP
            const momentumDist = (312 - currentLTP).toFixed(2);
            const valueDist = (currentLTP - 262).toFixed(2);
            document.getElementById('ltp-ref').innerText = M:${momentumDist} | V:${valueDist};

            // 2. Mock Strength & Stuck Condition [cite: 2026-02-15]
            let strength = Math.random() > 0.8 ? 5 : Math.floor(65 + Math.random() * 30);
            secondsPassed += 2; 

            // 3. UI Updates based on Rules [cite: 2026-02-14, 2026-02-15]
            const riskStatus = document.getElementById('risk-status');
            const advisory = document.getElementById('protocol-advisory');
            const stuckEl = document.getElementById('stuck-status');

            if (strength === 5) {
                stuckEl.innerText = "STUCK (WTT-1/WTB+1)";
                stuckEl.className = "text-xs font-black text-red-500";
                advisory.innerText = "PROTOCOL: 5% STUCK DETECTED. NO DIRECT ENTRY. USE WTT-1 / WTB+1 LOGIC.";
            } else {
                stuckEl.innerText = "DYNAMIC";
                stuckEl.className = "text-xs font-black text-green-400";
                advisory.innerText = strength >= 90 ? "90% RULE: SCENARIO FREEZE. WAIT FOR 11K RULE CHECK." : "SAFE ZONE: LOOK FOR S-1/R+1 ENTRIES.";
            }

            // 4. SOC 3-Hour Check [cite: 2026-02-15]
            if (secondsPassed >= 10800 && strength === 5) { // 10800s = 3h
                document.getElementById('soc-box').classList.add('soc-alert');
                riskStatus.innerText = "SOC - STATE OF CONFUSION";
                advisory.innerText = "SOC ALERT: 3 HOURS STUCK. NO TRADE FOR TODAY.";
            } else {
                riskStatus.innerText = strength >= 90 ? "90% FREEZE" : "SAFE SNIPER";
                riskStatus.className = px-4 py-1 rounded border font-black text-[10px] ${strength >= 90 ? 'bg-red-600 border-red-400' : 'bg-green-600 border-green-400'};
            }

            document.getElementById('strength-val').innerText = strength + "%";
            document.getElementById('timer-val').innerText = new Date(secondsPassed * 1000).toISOString().substr(11, 8);

            // 5. Generate Table Rows
            let html = "";
            STRIKES.forEach((s, i) => {
                let isCrossover = (SPOT > s && SPOT < (STRIKES[i+1] || 99999));
                html += `<tr class="${isCrossover ? 'red-line' : 'border-b border-gray-800'}">
                    <td class="p-3 text-gray-500">11.2</td>
                    <td class="p-3 text-green-500">12k</td>
                    <td class="p-3 ${s === 25350 ? 'max-oi' : ''}">45k</td>
                    <td class="p-3 ${s === 25300 ? 'max-vol' : ''}">98k</td>
                    <td class="p-3 font-bold">156.4</td>
                    <td class="p-3 strike-col">${s}</td>
                    <td class="p-3 font-bold">88.2</td>
                    <td class="p-3 ${s === 25150 ? 'max-vol' : ''}">92k</td>
                    <td class="p-3 ${s === 25100 ? 'max-oi' : ''}">41k</td>
                    <td class="p-3 text-red-500">9k</td>
                    <td class="p-3 text-gray-500">11.8</td>
                </tr>`;
            });
            document.getElementById('chain-rows').innerHTML = html;
        }

        // Auto-Start and Refresh
        setInterval(runSniper, 2000);
        runSniper();
    </script>
</body>
</html>
