<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Nifty Sniper V7 - Ultra Golden Edition</title>
    <style>
        :root { --gold: #ffd700; --bg: #0a0a0a; --red: #ff3e3e; --green: #00ff88; }
        body { background-color: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; padding: 10px; margin: 0; }
        
        /* HEADER SECTION */
        .header { border-bottom: 2px solid var(--gold); padding: 10px; text-align: center; background: #111; }
        .spot-box { background: #222; border: 1px solid var(--gold); padding: 15px; border-radius: 8px; margin: 10px auto; max-width: 300px; box-shadow: 0 0 15px rgba(255, 215, 0, 0.1); }
        .spot-price { font-size: 32px; font-weight: bold; color: white; }

        /* TERMINAL TABLE */
        .terminal-container { overflow-x: auto; padding: 10px; }
        table { width: 100%; max-width: 1200px; margin: auto; border-collapse: collapse; background: #161616; border: 1px solid #333; }
        th { background: #252525; color: var(--gold); padding: 12px; font-size: 13px; text-transform: uppercase; border: 1px solid #333; }
        td { padding: 12px; text-align: center; border: 1px solid #252525; font-weight: 500; font-family: 'Courier New', monospace; }
        
        /* THE DYNAMIC IMAGINARY LINE */
        .imaginary-line { 
            background: linear-gradient(90deg, transparent, var(--red), var(--red), transparent) !important;
            height: 12px;
            color: white !important;
            font-weight: 900;
            font-size: 14px;
            border-top: 2px solid #fff !important;
            border-bottom: 2px solid #fff !important;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse { 0% { opacity: 0.8; } 50% { opacity: 1; } 100% { opacity: 0.8; } }

        /* SIGNALS & ALERTS */
        .signal-btn { padding: 5px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .bullish-entry { background: rgba(0, 255, 136, 0.2); color: var(--green); border: 1px solid var(--green); }
        .bearish-entry { background: rgba(255, 62, 62, 0.2); color: var(--red); border: 1px solid var(--red); }
        .alert-panel { background: #300; border: 2px solid var(--red); color: white; padding: 15px; margin: 10px auto; max-width: 800px; display: none; text-align: center; font-weight: bold; animation: blink 0.5s infinite; }
        @keyframes blink { 50% { background: #600; } }

        /* CALCULATION PANEL */
        .footer-panel { background: #1a1a1a; border-left: 5px solid var(--gold); padding: 20px; max-width: 1180px; margin: 20px auto; text-align: left; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
    </style>
</head>
<body>

    <div class="header">
        <h1 style="color: var(--gold); margin:0;">NIFTY SNIPER V7</h1>
        <div class="spot-box">
            <div style="font-size: 12px; color: var(--gold);">LIVE NIFTY SPOT</div>
            <div class="spot-price" id="liveSpot">00000.00</div>
        </div>
    </div>

    <div id="safetyAlert" class="alert-panel">üö® ULTRA GOLDEN RULE: 11K OI CHANGE DETECTED AGAINST POSITION - COST TO COST EXIT NOW! üö®</div>

    <div class="terminal-container">
        <table>
            <thead>
                <tr>
                    <th>CE OI CHG</th>
                    <th>CE LTP</th>
                    <th>STRIKE PRICE</th>
                    <th>PE LTP</th>
                    <th>PE OI CHG</th>
                    <th>ULTRA GOLDEN SIGNALS</th>
                </tr>
            </thead>
            <tbody id="terminalBody">
                </tbody>
        </table>
    </div>

    <div class="footer-panel">
        <h3 style="color: var(--gold); margin-top: 0;">üìä ULTRA GOLDEN RULE ENGINE (CALCULATION)</h3>
        <div class="grid">
            <div>
                <p><b>Resistance (R):</b> <span id="rVal">0</span></p>
                <p><b>Support (S):</b> <span id="sVal">0</span></p>
            </div>
            <div>
                <p class="bullish-entry" style="padding: 10px;"><b>Bullish (S+1 Only):</b> <span id="bullEntry">0</span></p>
            </div>
            <div>
                <p class="bearish-entry" style="padding: 10px;"><b>Bearish (R-1 Only):</b> <span id="bearEntry">0</span></p>
            </div>
            <div>
                <p><b>OI Pressure:</b> <span id="oiPressure">Neutral</span></p>
                <p><b>SOC Timer:</b> <span id="socTimer">0h 0m</span></p>
            </div>
        </div>
    </div>

<script>
    let market = { spot: 25310.50, startTime: new Date() };

    function sniperEngine() {
        // 1. Simulate Spot Movement (To show dynamic line)
        market.spot += (Math.random() * 10 - 5);
        document.getElementById('liveSpot').innerText = market.spot.toFixed(2);

        // 2. Ultra Golden Rule 6: Calculation (Resistance Based)
        let r_strike = Math.round(market.spot / 50) * 50; 
        let ce_ltp = 20.50; // Mock LTP
        let R = r_strike + ce_ltp; 
        let R_minus_1 = R - 50; // Support (if not elsewhere)
        let S_plus_1 = R_minus_1 + 50; // Bullish Entry from S+1

        document.getElementById('rVal').innerText = R.toFixed(2);
        document.getElementById('sVal').innerText = R_minus_1.toFixed(2);
        document.getElementById('bullEntry').innerText = S_plus_1.toFixed(2);
        document.getElementById('bearEntry').innerText = R_minus_1.toFixed(2);

        // 3. Render Table
        let html = "";
        let lowerRange = Math.floor(market.spot / 50) * 50;
        let upperRange = lowerRange + 50;

        for (let s = lowerRange - 100; s <= upperRange + 100; s += 50) {
            
            // DYNAMIC IMAGINARY LINE (Rule 2)
            if (s === upperRange) {
                html += <tr class="imaginary-line"><td colspan="6">üî¥ MARKET IMAGINARY LINE (THICK RED) üî¥</td></tr>;
            }

            // Signal Logic (Rule 6: Bullish S+1, Bearish R-1)
            let signal = "-";
            if (Math.abs(s - S_plus_1) < 25) signal = "<span class='signal-btn bullish-entry'>BUY S+1 üêÇ</span>";
            if (Math.abs(s - R_minus_1) < 25) signal = "<span class='signal-btn bearish-entry'>SELL R-1 üêª</span>";
            if (s === r_strike) signal += " [RESISTANCE]";

            // Fake OI Data for Visual (Rule 3)
            let ce_chg = Math.floor(Math.random() * 15000);
            let pe_chg = Math.floor(Math.random() * 15000);

            html += `<tr>
                <td style="color:${ce_chg > 10000 ? 'var(--red)' : '#888'}">${ce_chg}</td>
                <td style="color:var(--red)">${(Math.random()*50 + 10).toFixed(2)}</td>
                <td style="background:#222; font-weight:bold; color:var(--gold)">${s}</td>
                <td style="color:var(--green)">${(Math.random()*50 + 10).toFixed(2)}</td>
                <td style="color:${pe_chg > 10000 ? 'var(--green)' : '#888'}">${pe_chg}</td>
                <td>${signal}</td>
            </tr>`;

            // 11K Rule Trigger (Safety Rule)
            if (ce_chg > 11000 || pe_chg > 11000) {
                if (Math.random() > 0.9) document.getElementById('safetyAlert').style.display = 'block';
                else document.getElementById('safetyAlert').style.display = 'none';
            }
        }
        document.getElementById('terminalBody').innerHTML = html;

        // SOC Timer (Rule 4 Simulation)
        let diff = Math.floor((new Date() - market.startTime) / 1000 / 60);
        document.getElementById('socTimer').innerText = ${Math.floor(diff/60)}h ${diff%60}m;
    }

    // Interval: Har 2 second mein data refresh
    setInterval(sniperEngine, 2000);
    sniperEngine(); // Initial Call
</script>
</body>
</html>
